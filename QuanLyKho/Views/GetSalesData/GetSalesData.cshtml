
@{
    ViewBag.Title = "GetSalesData";
    Layout = "~/Views/Shared/_LayoutIndex.cshtml";
}

@model IEnumerable<QuanLyKho.Models.SalesData>

@{
    ViewBag.Title = "Sales Report";
}

<h2>@ViewBag.Title</h2>

<div>
    <canvas id="myChart"></canvas>
</div>

@section scripts {
    <script>
        $(function () {
            $.ajax({
                url: "@Url.Action("GetSalesData", "SANPHAM")",
                type: "GET",
                success: function (result) {
                    var data = {
                        labels: [],
                        datasets: [
                            {
                                label: "Sales Data",
                                backgroundColor: "rgba(255,99,132,0.2)",
                                borderColor: "rgba(255,99,132,1)",
                                borderWidth: 1,
                                data: []
                            }
                        ]
                    };
                    $.each(result, function (i, item) {
                        data.labels.push(item.TenSP);
                        data.datasets[0].data.push(item.SoLuongXuat);
                    });
                    var ctx = document.getElementById("myChart").getContext("2d");
                    var myChart = new Chart(ctx, {
                        type: 'bar',
                        data: data,
                        options: {
                            scales: {
                                yAxes: [{
                                    ticks: {
                                        beginAtZero: true
                                    }
                                }]
                            }
                        }
                    });
                }
            });
        });
    </script>
}